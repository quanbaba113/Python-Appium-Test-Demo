/*!CK:2395912328!*//*1433859418,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["QxSYG"]); }

__d("TimelineProfilePictureLoggerEnums",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={actions:{EDIT_THUMBNAIL:"edit_thumbnail",FROM_PHOTOS:"from_photos",MAKE_PROFILE:"make_profile",SILHOUETTE:"silhouette",SUGGESTION:"suggestion",SUGGESTION_UPLOAD:"suggestion_upload",SYNCED_PHOTO:"synced_photo",TAKE_PHOTO:"take_photo",UPLOAD:"upload_photo",USE_PREVIOUS:"use_previous"},flows:{PERMALINK:"permalink",SNOWLIFT:"snowlift",SPOTLIGHT:"spotlight",VAULT:"vault",ZOOMCROP:"zoomcrop"},steps:{CANCEL:"cancel",CROP:"crop",CROP_FAIL:"crop_fail",CROP_SAVING:"crop_saving",CROP_SUCCESS:"crop_success",DRAG_AND_DROP:"drag_and_drop",FAIL:"fail",INIT:"init",LOADING:"loading",PREVIOUS_PIC_FAIL:"previous_pic_fail",PREVIOUS_PIC_INIT:"previous_pic_init",PREVIOUS_PIC_SAVING:"previous_pic_saving",PREVIOUS_PIC_SUCCESS:"previous_pic_success",RESIZE_BEGIN:"resize_begin",RESIZE_SKIPPED:"resize_skipped",RESIZE_SUCCESS:"resize_success",RESIZE_FAIL:"resize_fail",SKIP_CROP:"skip_crop",SUCCESS:"success",UPLOAD_CANCEL:"upload_cancel",UPLOAD_SELECT:"upload_select",UPLOAD_SUCCESS:"upload_success",VIEWER_INIT:"viewer_init"}};},null);
__d("AbstractRangeInput.react",["Event","Keys","React","UserAgent","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o={BLOCK:'block',PUSH:'push',FREE:'free'},p=i.createClass({displayName:"AbstractRangeInput",propTypes:{name:n.string,min:n.number,max:n.number,step:n.number,disabled:n.bool,values:n.array,behavior:n.oneOf([o.BLOCK,o.PUSH,o.FREE]),onChange:n.func},getDefaultProps:function(){return {name:'',min:0,max:1,step:.01,disabled:false,values:[.5],behavior:o.FREE};},componentWillReceiveProps:function(q){this.setState({values:q.values});},componentDidMount:function(){var q=j.isBrowser('IE < 9')?document.documentElement:window;this._listeners=g.listen(q,{selectstart:function(r){this._thumbData&&g.prevent(r);}.bind(this),mousemove:this._onMouseMove,mouseup:this._onMouseUp});},componentWillUnmount:function(){for(var q in this._listeners){this._listeners[q]&&this._listeners[q].remove();this._listeners[q]=null;}},getInitialState:function(){var q=this.props.values;if(this.props.behavior!==o.FREE)q.sort();return {values:q};},_onKeyDown:function(q,event){switch(g.getKeyCode(event)){case h.DOWN:case h.LEFT:this._updateThumbData(q);this._moveThumbByX(-1);break;case h.RIGHT:case h.UP:this._updateThumbData(q);this._moveThumbByX(1);break;}},_onMouseDown:function(q,event){g.prevent(event);this._updateThumbData(q);this._thumbData.dragStartX=event.nativeEvent.clientX;},_onMouseMove:function(event){if(this._thumbData)this._moveThumbByX(event.clientX-this._thumbData.dragStartX);},_updateThumbData:function(q){this._thumbData={draggingIdx:q,dragStartValue:this.state.values[q],scale:i.findDOMNode(this).clientWidth};},_moveThumbByX:function(q){var r=(this.props.max-this.props.min)/this._thumbData.scale,s=this._thumbData.dragStartValue+(q*r),t=this.state.values,u=t.length,v=this._thumbData.draggingIdx;if(this.props.step){var w=1/this.props.step;s=Math.round(s*w)/w;}var x=this.props.min,y=this.props.max;if(this.props.behavior===o.BLOCK){x=v>0?t[v-1]:x;y=v<u-1?t[v+1]:y;}s=s<x?x:s;s=s>y?y:s;t[v]=s;if(this.props.behavior===o.PUSH){for(var z=v+1,aa=t.length;z<aa;z++){if(t[z]>=s)break;t[z]=s;}for(z=v-1;z>=0;z--){if(t[z]<=s)break;t[z]=s;}}this.setState({values:t});this.props.onChange&&this.props.onChange(t);},_onMouseUp:function(event){if(this._thumbData)this._thumbData=null;},render:function(){var q=this.state.values,r=this.props.disabled,s=q.length>1,t=this.props.max-this.props.min,u=q.map(function(v,w){var x=(v-this.props.min)/t,y=this.props.name+(s?'['+w+']':'');return (i.createElement("div",{className:(("_4qwr")+(r?' '+"_4qws":'')),key:'thumb-'+w,onDragStart:g.prevent,onKeyDown:r?null:function(z){return this._onKeyDown(w,z);}.bind(this),onMouseDown:r?null:function(z){return this._onMouseDown(w,z);}.bind(this),style:{left:(x*100)+'%'},tabIndex:0},i.createElement("input",{onChange:this.props.onChange,name:y,value:v,type:"hidden"})));}.bind(this));return (i.createElement("div",i.__spread({},this.props,{className:l(this.props.className,"_4qwt")}),i.createElement("div",{className:"_4qwu"}),u));}});e.exports=p;},null);
__d("ProgressBar.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"UIProgressBar",propTypes:{value:k.number.isRequired,label:k.string,min:k.number,max:k.number,size:k.oneOf(['small','large']),typesetting:k.oneOf(['float','inline']),isRounded:k.bool},getDefaultProps:function(){return {min:0,max:100,size:'large',typesetting:'inline',isRounded:false};},_calculatePercentage:function(){var m=this.props,n=Math.min(Math.max((m.value-m.min)/(m.max-m.min)*100,0),100);return n;},_hasLabel:function(){return this.props.label!=null&&this.props.size!=='small';},_isFloatingLabel:function(){return this._hasLabel()&&this.props.typesetting==='float';},_getLabel:function(){if(!this._hasLabel())return null;return this.props.label;},_getSpacer:function(){if(this._isFloatingLabel())return g.createElement("div",{className:"_6a"}," ");return null;},_getFillArea:function(){var m=Math.round(this._calculatePercentage()),n=(("_5e4k")+(m===0?' '+"_5e2d":'')+(m===100?' '+"_5e4j":'')),o=this._getLabel();if(o)o=g.createElement("span",{className:"_5e2h"},o);var p=g.createElement("div",{className:n,style:{width:m+'%'}},this._getSpacer(),o);return p;},_getUnfillArea:function(){var m=this._getLabel();if(!m)return null;m=g.createElement("span",{className:"_5e2h _5e2n"},m);if(this._isFloatingLabel()){var n=this._calculatePercentage(),o={left:n+'%',width:n+'%'},p=g.createElement("div",{className:"_5e2g",style:o},this._getSpacer(),m);return p;}return m;},render:function(){var m=(("_5e4h")+(!this._isFloatingLabel()?' '+"_5e2k":'')+(this._isFloatingLabel()?' '+"_5e2j":'')+(this.props.size==='small'?' '+"_5e2l":'')+(this.props.isRounded===true?' '+"_5e2m":''));if(this._isFloatingLabel()){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,m)}),g.createElement("div",{className:"_5e2k"},this._getUnfillArea(),this._getFillArea())));}else return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,m)}),this._getUnfillArea(),this._getFillArea()));}});e.exports=l;},null);
__d("PhotoZoomCropDimensions",["BasicVector","confine"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=320,j=.5,k=.5,l=180,m=.05,n=3;function o(q,r){return Number(q.toFixed(r||n));}p.prototype.clone=function(){"use strict";return new p(this.$PhotoZoomCropDimensions0).setSize(this.$PhotoZoomCropDimensions1.x,this.$PhotoZoomCropDimensions1.y).setSmallestSize(this.$PhotoZoomCropDimensions2.x,this.$PhotoZoomCropDimensions2.y).setCenter(this.$PhotoZoomCropDimensions3.x,this.$PhotoZoomCropDimensions3.y).setZoom(this.$PhotoZoomCropDimensions4);};function p(q){"use strict";this.$PhotoZoomCropDimensions0=q;this.setSmallestSize(l,l).setCenter(j,j);this.setSize(i,i).setZoom(k);}p.prototype.getArea=function(){"use strict";var q=this.getPosition(),r=this.$PhotoZoomCropDimensions1.div(this.$PhotoZoomCropDimensions4);return {height:Math.round(r.y),width:Math.round(r.x),x:Math.round(Math.abs(q.left)/this.$PhotoZoomCropDimensions4),y:Math.round(Math.abs(q.top)/this.$PhotoZoomCropDimensions4)};};p.prototype.getPosition=function(){"use strict";var q=this.$PhotoZoomCropDimensions5();return {height:o(q.imageSize.y),left:o(this.$PhotoZoomCropDimensions1.x/2-q.center.x),top:o(this.$PhotoZoomCropDimensions1.y/2-q.center.y),width:o(q.imageSize.x)};};p.prototype.getRect=function(){"use strict";var q=this.$PhotoZoomCropDimensions5(),r=this.$PhotoZoomCropDimensions1.div(this.$PhotoZoomCropDimensions4);return {center:{x:q.center.x/q.imageSize.x,y:q.center.y/q.imageSize.y},size:{x:r.x,y:r.y}};};p.prototype.getSize=function(){"use strict";return this.$PhotoZoomCropDimensions1;};p.prototype.getZoom=function(){"use strict";return this.$PhotoZoomCropDimensions4;};p.prototype.getZoomRange=function(){"use strict";var q=Math.min(this.$PhotoZoomCropDimensions0.x,this.$PhotoZoomCropDimensions0.y);return {max:this.$PhotoZoomCropDimensions1.x/Math.min(this.$PhotoZoomCropDimensions2.x,q),min:this.$PhotoZoomCropDimensions1.x/q};};p.prototype.hasSpaceToDrag=function(){"use strict";var q=this.getZoomRange();return !(p.isSquare(this.$PhotoZoomCropDimensions0)&&q.min===q.max);};p.prototype.isCurrentlyDragable=function(){"use strict";var q=this.$PhotoZoomCropDimensions5().imageSize;return q.x!==this.$PhotoZoomCropDimensions1.x||q.y!==this.$PhotoZoomCropDimensions1.y;};p.prototype.moveByPixels=function(q,r){"use strict";var s=this.$PhotoZoomCropDimensions5();return this.moveBy(q/s.imageSize.x,r/s.imageSize.y);};p.prototype.moveBy=function(q,r){"use strict";this.setCenter(this.$PhotoZoomCropDimensions3.x+q,this.$PhotoZoomCropDimensions3.y+r);var s=this.$PhotoZoomCropDimensions5();this.$PhotoZoomCropDimensions3=s.center.div(s.imageSize.x,s.imageSize.y);return this;};p.prototype.setCenter=function(q,r){"use strict";this.$PhotoZoomCropDimensions3=new g(h(q,0,1),h(r,0,1));return this;};p.prototype.setSize=function(q,r){"use strict";this.$PhotoZoomCropDimensions1=new g(q,r);return this;};p.prototype.setSmallestSize=function(q,r){"use strict";this.$PhotoZoomCropDimensions2=new g(q,r);return this;};p.prototype.setZoom=function(q){"use strict";var r=this.getZoomRange();this.$PhotoZoomCropDimensions4=h(q,r.min,r.max);return this;};p.prototype.$PhotoZoomCropDimensions6=function(q,r){"use strict";var s=this.$PhotoZoomCropDimensions1.x/2,t=this.$PhotoZoomCropDimensions1.y/2;return new g(h(r.x,s,q.x-s),h(r.y,t,q.y-t));};p.prototype.$PhotoZoomCropDimensions5=function(){"use strict";var q=this.$PhotoZoomCropDimensions0.mul(this.$PhotoZoomCropDimensions4);return {imageSize:q,center:this.$PhotoZoomCropDimensions6(q,this.$PhotoZoomCropDimensions3.mul(q.x,q.y))};};p.isSquare=function(q){"use strict";return Math.abs(q.x/q.y-1)<m;};e.exports=p;},null);
__d("SpotlightProfilePicCropOptions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=2.5,h=.8,i=320,j={getOptions:function(k,l){var m={},n=Math.min(l.x,l.y),o,p,q=k.facebox;if(q){p=Math.max(q.size.x*l.x,q.size.y*l.y)*g;o=q.center;}else{p=h*n;if(k.focus)o=k.focus;}var r=l.x/k.original.width;m.height=m.width=Math.min(Math.max(p,i*r),n);if(o){m.center_x=Math.min(Math.max(o.x*l.x,m.width/2),l.x-m.width/2);m.center_y=Math.min(Math.max(o.y*l.y,m.height/2),l.y-m.height/2);}return m;},getOptionsAsRatio:function(k,l){var m=j.getOptions(k,l),n=Math.min(l.x,l.y);return {center:{x:m.center_x?m.center_x/l.x:.5,y:m.center_y?m.center_y/l.y:.5},size:{x:m.width/n,y:m.height/n}};}};e.exports=j;},null);
__d("FileUploadTarget",["AsyncUploadRequest","DragDropFileUpload","DragDropTarget","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m){"use strict";var n=(function(o){this.$FileUploadTarget0=new g(m).setFiles({file:o}).setRelativeTo(l).setStatusElement(l).setAllowCrossOrigin(this.$FileUploadTarget1);this.$FileUploadTarget0.subscribe('complete',function(p,q){this.onCompleteCallback(q);this.$FileUploadTarget0=null;}.bind(this));this.$FileUploadTarget0.send();}).bind(this);this.dragDropTarget=new i(l).setOnFilesDropCallback(function(o){o.length&&this.asyncProcess(o,function(p){p.length&&n(p);});}.bind(this));this.asyncProcess=function(o,p){p(o);};this.preprocess=function(o){return o;};this.onCompleteCallback=j;}k.prototype.setAllowCrossOrigin=function(l){"use strict";this.$FileUploadTarget1=l;return this;};k.prototype.setPreprocessor=function(l){"use strict";this.preprocess=l;return this;};k.prototype.setAsyncProcessor=function(l){"use strict";this.asyncProcess=l;return this;};k.prototype.onComplete=function(l){"use strict";this.onCompleteCallback=l;return this;};k.prototype.abort=function(){"use strict";this.$FileUploadTarget0&&this.$FileUploadTarget0.abort();};k.prototype.activate=function(){"use strict";if(!h.isSupported())return this;this.dragDropTarget.setFileFilter(this.preprocess).enable();return this;};e.exports=k;},null);
__d("SinglePictureUploadTarget",["Bootloader","Dialog","ErrorDialog","FileUploadTarget","emptyFunction","htmlSpecialChars","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p){"use strict";this.fileUploadTarget=new j(o,p);this.preprocessCallback=k;this.asyncPreprocessCallback=function(q,r){r(q);};this.oncompleteCallback=k;this.afterSuccessCallback=k;this.maxWidth=null;this.maxHeight=null;}n.prototype.setAllowCrossOrigin=function(o){"use strict";this.fileUploadTarget.setAllowCrossOrigin(o);return this;};n.prototype.setPreprocessCallback=function(o){"use strict";this.preprocessCallback=o;return this;};n.prototype.setAsyncPreprocessCallback=function(o){"use strict";this.asyncPreprocessCallback=o;return this;};n.prototype.setOncompleteCallback=function(o){"use strict";this.oncompleteCallback=o;return this;};n.prototype.setAfterSuccessCallback=function(o){"use strict";this.afterSuccessCallback=o;return this;};n.prototype.setMaximumDimensions=function(o,p){"use strict";this.maxWidth=o;this.maxHeight=p;return this;};n.prototype.activate=function(){"use strict";var o=function(s){return l(s.name);},p=(function(s){if(s.length>1){i.show(m._("\u4e0a\u4f20\u9519\u8bef"),m._("You can only select 1 photo to upload to this album. Only the first photo you selected will be uploaded."));s=[s[0]];}var t=s[0];if(!t.type.match(/^image\//)){i.show(m._("\u4e0a\u4f20\u9519\u8bef"),m._("\u6211\u4eec\u65e0\u6cd5\u8bc6\u522b{filename}\u7684\u5185\u5bb9\u3002\u8bf7\u786e\u4fdd\u7167\u7247\u683c\u5f0f\u4e3a jpg\u3001gif \u6216 png\u3002",[m.param("filename",o(t))]));return [];}this.preprocessCallback(s);return s;}).bind(this),q=(function(s,t){var u=1024*1024*16,v=1024*1024*1,w=function(y){if(y.size>u){i.show(m._("\u4e0a\u4f20\u9519\u8bef"),m._("{filename}\u5c3a\u5bf8\u8fc7\u5927\u3002\u8bf7\u5c06\u4f60\u7684\u7167\u7247\u5927\u5c0f\u8c03\u81f38000x8000\u50cf\u7d20\u4ee5\u4e0b\u5e76\u91cd\u8bd5\u3002",[m.param("filename",o(s[0]))]));t([]);}else this.asyncPreprocessCallback([y],t);}.bind(this),x=s[0];if((x.size<v)||(!this.maxWidth&&!this.maxHeight)){w(x);}else g.loadModules(["ImageExif","ImageResizer"],function(y,z){if(!z.isSupported()){w(x);return;}var aa=new z(x,this.maxWidth,this.maxHeight);aa.subscribe('resized',function(ba,ca){if(ca.size>x.size){w(x);}else w(ca);}.bind(this));aa.subscribe('error',function(){w(x);}.bind(this));y.readFromFile(x,function(ba){ba&&aa.setOrientation(ba.Orientation);aa.resize();});});}).bind(this),r=(function(s){var t=s[0];if(!t.getResponse())return;this.oncompleteCallback(t);var u=t.getResponse().getPayload();if(t.isSuccess()){this.afterSuccessCallback(u);}else if(u&&u.__dialog){var v=new h();v.$SinglePictureUploadTarget1(u.__dialog);v.setButtons(h.OK).show();}else i.show(u.error.title,u.error.body);}).bind(this);return this.fileUploadTarget.onComplete(r).setPreprocessor(p).setAsyncProcessor(q).activate();};e.exports=n;},null);
__d("SpotlightViewerInit",["DOM","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={render:function(j,k){var l=g.create('div'),m=h.render(j,l);g.appendContent(document.body,l);m.subscribeOnce('close',function(){h.unmountComponentAtNode(l);g.remove(l);k&&k();});return m;}};e.exports=i;},null);
__d("PhotoZoomCropImagePreview.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"PhotoZoomCropImagePreview",propTypes:{dimensions:k.object,size:k.object,src:k.string},render:function(){var m=this.props.dimensions,n=this.props.size,o=m.getSize().x/n.x;if(o!==1)m=m.clone().setSize(n.x,n.y).setZoom(m.getZoom()/o);return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_1k3v"),style:Object.assign({},(this.props.style||{}),{height:n.y,width:n.x})}),g.createElement("img",{className:"_1k3w",src:this.props.src,style:m.getPosition()})));}});e.exports=l;},null);
__d("PhotoZoomCropImage.react",["Event","Keys","React","UserAgent","Vector","Image.react","PhotoZoomCropImagePreview.react","cx","ix","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=i,s=r.PropTypes,t=5,u=i.createClass({displayName:"PhotoZoomCropImage",propTypes:{dimensions:s.object,enableDrag:s.bool,src:s.string},getDefaultProps:function(){return {enableDrag:true};},getInitialState:function(){return {moved:false};},componentDidMount:function(){var v=j.isBrowser('IE < 9')?document.documentElement:window;this._listeners=g.listen(v,{mousemove:this._handleMouseMove,mouseup:this._handleMouseUp});},componentWillUnmount:function(){for(var v in this._listeners){this._listeners[v]&&this._listeners[v].remove();this._listeners[v]=null;}},render:function(){var v=this.props.dimensions,w=v.getSize();return (i.createElement("div",i.__spread({},this.props,{className:q(this.props.className,"_4on5"),style:Object.assign({},(this.props.style||{}),{height:w.y,width:w.x})}),i.createElement(m,{dimensions:v,onKeyDown:this._handleKeyDown,size:w,src:this.props.src,tabIndex:0}),i.createElement("div",{className:(("_3dfy")+(this.state.moved||!this.props.enableDrag?' '+"_3dfz":''))},i.createElement("span",{className:"_3df-"},i.createElement(l,{className:"_3-8_ _3df_",src:o('/images/ads/cropper/drag.png')}),p._("\u62d6\u52a8\u8c03\u6574\u4f4d\u7f6e"))),i.createElement("img",{className:(("_4on7")+(!this.props.enableDrag?' '+"_3mk2":'')),onDragStart:g.prevent,onMouseDown:this._handleMouseDown,src:this.props.src,style:v.getPosition()})));},_handleKeyDown:function(v){this._position=null;var w=0,x=0;switch(g.getKeyCode(v)){case h.DOWN:x=t;break;case h.LEFT:w=-t;break;case h.RIGHT:w=t;break;case h.UP:x=-t;break;}if(w||x){this.props.onMove(w,x);this.setState({moved:true});}},_handleMouseDown:function(v){if(this._position)return;v.preventDefault();this._position=k.getEventPosition(v);},_handleMouseMove:function(v){if(!this._position||!this.props.enableDrag)return;var w=k.getEventPosition(v),x=this._position.sub(w);this.props.onMove(x.x,x.y);this.setState({moved:true});this._position=w;},_handleMouseUp:function(){this._position=null;}});e.exports=u;},null);
__d("PhotoZoomCropSlider.react",["Keys","React","AbstractRangeInput.react","clamp","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=6,p=h.createClass({displayName:"PhotoZoomCropSlider",propTypes:{onZoom:n.func,position:n.number,zoom:n.number,zoomRange:n.object},render:function(){var q=this.props.zoomRange;return (h.createElement("div",{className:l(this.props.className,"_55vh")},h.createElement("div",{className:(("_55vi")+(q.min===this.props.zoom?' '+"_4obh":'')),onClick:this._minus,onKeyUp:this._minusIfValid,tabIndex:0},"−"),h.createElement(i,{className:"_55vj",disabled:q.max===q.min,max:q.max,min:q.min,onChange:this._logarithmicZoom,values:[this.props.position]}),h.createElement("div",{className:(("_55vk")+(q.max===this.props.zoom?' '+"_4obh":'')),onClick:this._plus,onKeyUp:this._plusIfValid,tabIndex:0},"+")));},_logarithmicZoom:function(q){var r=this.props.zoomRange.max,s=this.props.zoomRange.min,t=Math.log2(r),u=Math.log2(s),v=q[0],w=(t-u)/r,x=Math.exp(u+w*r),y=Math.exp(u+w*s),z=Math.exp(u+w*v),aa=j(0,(z-y)/(x-y),100),ba=s+aa*(r-s);this.props.onZoom([ba],v);},_zoomInDirection:function(q){var r=this.props.zoomRange.max,s=this.props.zoomRange.min;this.props.onZoom([j(s,this.props.zoom+(q*(r-s)/o),r)]);},_minus:function(){this._zoomInDirection(-1);},_minusIfValid:function(event){if(event.which===g.RETURN)this._minus();},_plus:function(){this._zoomInDirection(1);},_plusIfValid:function(event){if(event.which===g.RETURN)this._plus();}});e.exports=p;},null);
__d("PhotoZoomCrop.react",["BasicVector","PhotoZoomCropDimensions","PhotoZoomCropImage.react","PhotoZoomCropImagePreview.react","PhotoZoomCropSlider.react","React","Image.react","cx","joinClasses","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=l,r=q.PropTypes,s=r.shape({x:r.number.isRequired,y:r.number.isRequired}),t=l.createClass({displayName:"PhotoZoomCrop",propTypes:{center:s,cropSizeRatio:s,imageSize:r.instanceOf(g),messageText:r.string,previewSize:r.number,src:r.string,warningText:r.string},getDefaultProps:function(){return {previewSize:32};},getInitialState:function(){this._dims=new h(this.props.imageSize);if(this.props.center)this._dims.setCenter(this.props.center.x,this.props.center.y);if(this.props.cropSizeRatio){var u=this.props.cropSizeRatio.x*this.props.imageSize.x;this._dims.setZoom(this._dims.getSize().x/u);}var v=this._getDimensionsState();v.position=this._dims.getZoom();return v;},render:function(){return (l.createElement("div",{className:o("_4liw",this.props.className)},l.createElement(i,{className:"_1szc",dimensions:this._dims,onMove:this._handleMove,enableDrag:this._dims.isCurrentlyDragable(),src:this.props.src}),l.createElement(j,{className:"_1szd",dimensions:this._dims,size:{x:this.props.previewSize,y:this.props.previewSize},src:this.props.src}),l.createElement(k,{className:"_4lix",onZoom:this._handleZoom,position:this.state.position,zoom:this.state.zoom,zoomRange:this._dims.getZoomRange()}),this._getMessage()));},getDimensions:function(){return this._dims;},resetDimensions:function(){this.setState(this.getInitialState());},_handleZoom:function(u,v){this._dims.setZoom(u[0]);var w=this._getDimensionsState();w.position=v||u[0];this.setState(w);},_handleMove:function(u,v){this._dims.moveByPixels(u,v);this.setState(this._getDimensionsState());},_getDimensionsState:function(){return {dimensions:this._dims.getPosition(),zoom:this._dims.getZoom()};},_getMessage:function(){var u,v;if(this.state.zoom>1&&this.props.warningText){u=p({name:'error-solid',shade:'white',size:'small'});v=this.props.warningText;}else if(this.props.messageText){u=p({name:'info-solid',shade:'white',size:'small'});v=this.props.messageText;}else return null;return (l.createElement("div",{className:"_a62"},l.createElement(m,{className:"_a63",src:u}),v));}});e.exports=t;},null);
__d("ProfilePhotoActionLogger",["Banzai"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={EVENT_SELECT_METHOD:'select_method',EVENT_CAMERA_PERMISSION_PROVIDED:'permission_provided',EVENT_CAMERA_PERMISSION_DENIED:'permission_denied',EVENT_CAMERA_NO_WEBCAM:'permission_denied',EVENT_CAMERA_UNKNOWN_MEDIASTREAM_ERROR:'unknown_mediastream_error',EVENT_CAMERA_TAKE_PHOTO:'take_photo',EVENT_CAMERA_RETAKE_PHOTO:'retake_photo',EVENT_CAMERA_UPLOAD_ATTEMPT:'upload_attempt',EVENT_CAMERA_UPLOAD_ERROR:'upload_error',EVENT_CAMERA_UPLOAD_SUCCESS:'upload_success',SOURCE_SUGGESTIONS:'suggestions',SOURCE_TIMELINE:'timeline',SOURCE_NUX:'nux',METHOD_EXISTING:'existing',METHOD_UPLOAD:'upload',METHOD_CAMERA:'camera',log:function(i,j,k){g.post('profile_photo_action',{event:i,source:j,method:k});}};e.exports=h;},null);
__d("TimelineProfilePicConfig",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={loading:'timeline/profile_pic/loading',success:'timeline/profile_pic/success',leavingMessage:g._("\u4f60\u7684\u4e2a\u4eba\u5934\u50cf\u4ecd\u5728\u4e0a\u4f20\uff0c\u662f\u5426\u786e\u5b9e\u8981\u79bb\u5f00\uff1f")};e.exports=h;},null);
__d("ProfilePictureFlowLogging",["Arbiter","Banzai","Event","Parent","ProfilePhotoActionLogger","Run","TimelineProfilePicConfig","TimelineProfilePictureLoggerEnums","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=m.loading,q=m.success,r='data-action-type',s,t,u,v;function w(){v&&v.unsubscribe();v=null;}var x={action:n.actions,flow:n.flows,step:n.steps,log:function(y){var z=y||x.step.INIT;h.post('profile_pic_action',{action_type:s,flow_type:t,step_type:z});if(s===x.action.UPLOAD&&z===x.step.INIT)k.log(k.EVENT_SELECT_METHOD,u,k.METHOD_UPLOAD);t=null;if(y==='success'||y==='fail')s=null;return x;},setAction:function(y){s=y;return x;},setFlowType:function(y){t=y;return x;},setSource:function(y){u=y;return x;},init:function(y,z){if(z)u=z;if(!v){v=g.subscribe([p,q],function(aa){x.log(aa===p?n.steps.LOADING:n.steps.SUCCESS);});l.onLeave(w);}o(i.listen(y,'click',function(aa){var ba=j.byAttribute(aa.getTarget(),r);if(!ba)return;x.setAction(ba.getAttribute(r)).log();}));},initMenuItems:function(y,z,aa){x.init(y.getRoot(),aa);}};e.exports=x;},null);
__d("ProfilePicCropViewerStrings",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={BUTTON_CANCEL:g._("\u53d6\u6d88"),BUTTON_CLOSE:g._("\u5173\u95ed"),BUTTON_SAVE:g._("\u4fdd\u5b58"),CROP_AND_SAVE:g._("\u88c1\u526a\u7167\u7247"),CROP_EXPLANATION:g._("\u4fdd\u5b58\u4e3a\u5934\u50cf\u524d\uff0c\u8bf7\u5148\u88c1\u526a\u7167\u7247\u3002"),CROP_INSTRUCTIONS:g._("\u5c06\u65b9\u6846\u79fb\u52a8\u81f3\u4f60\u5e0c\u671b\u526a\u5207\u7684\u7167\u7247\u90e8\u5206\u3002\u5411\u91cc\u6216\u5411\u5916\u62d6\u52a8\u56db\u4e2a\u89d2\u4ee5\u8c03\u8282\u5c3a\u5bf8\u3002"),CROP_SAVING:g._("\u6b63\u5728\u4fdd\u5b58\u5934\u50cf..."),LEAVE_WARNING_BODY:g._("\u5982\u679c\u5173\u95ed\u6b64\u5bf9\u8bdd\u6846\uff0c\u5bf9\u4e2a\u4eba\u5934\u50cf\u6240\u4f5c\u7684\u66f4\u6539\u5c06\u4e0d\u4f1a\u4fdd\u5b58\u3002"),LEAVE_WARNING_CANCEL:g._("\u7559\u5728\u6b64\u9875"),LEAVE_WARNING_OK:g._("\u79bb\u5f00\u6b64\u9875"),LEAVE_WARNING_TITLE:g._("\u66f4\u6539\u672a\u4fdd\u5b58"),LEAVE_WARNING_UNLOAD:g._("\u4f60\u5bf9\u4e2a\u4eba\u5934\u50cf\u6240\u4f5c\u66f4\u6539\u5c1a\u672a\u4fdd\u5b58\u3002"),LOADING:g._("\u52a0\u8f7d\u4e2d..."),PREV_PHOTO_ADJUST_THUMBNAIL:g._("\u7167\u7247\u4e4b\u524d\u5df2\u88ab\u7528\u4f5c\u5934\u50cf\u3002"),PREVIOUS_PIC:g._("\u8fd9\u5f20\u7167\u7247\u4e4b\u524d\u505a\u8fc7\u5934\u50cf\u3002\u5e0c\u671b\u518d\u6b21\u4f7f\u7528\u5417\uff1f"),PROFILE_PIC_VISIBILITY:g._("\u5f53\u524d\u5934\u50cf\u662f\u59cb\u7ec8\u516c\u5f00\u663e\u793a\u7684\u3002"),HIDDEN_FROM_NEWS_FEED:g._("\u66f4\u52a8\u5185\u5bb9\u4e0d\u4f1a\u663e\u793a\u5728\u52a8\u6001\u6d88\u606f\u4e2d\u3002"),SAVE_AND_CROP:g._("\u88c1\u526a\u5e76\u4fdd\u5b58"),SAVED_BODY:g._("\u4e2a\u4eba\u5934\u50cf\u4fdd\u5b58\u6210\u529f\u3002"),SAVED_TITLE:g._("\u5df2\u4fdd\u5b58\u4e2a\u4eba\u5934\u50cf"),SET_THUMBNAIL:g._("\u8bbe\u7f6e\u7f29\u7565\u56fe"),SKIP_CROP:g._("\u8df3\u8fc7"),SKIP_CROP_EXPLANATION:g._("\u4fdd\u5b58\u6574\u5f20\u7167\u7247\u4f5c\u4e3a\u5934\u50cf\uff0c\u8bbe\u7f6e\u7f29\u7565\u56fe\u3002"),THUMBNAIL_MODE_EXPLANATION:g._("\u6574\u5f20\u7167\u7247\u5c06\u4fdd\u5b58\u4e3a\u4f60\u7684\u5934\u50cf\u3002\u8c03\u6574\u7167\u7247\u4f4d\u7f6e\uff0c\u8bbe\u7f6e\u7f29\u7565\u56fe\u3002"),UPLOADING:g._("\u6b63\u5728\u4e0a\u4f20\u2026"),SMALL_PHOTO_WARNING:g._("\u7167\u7247\u5c3a\u5bf8\u8fc7\u5c0f\uff0c\u5934\u50cf\u4f1a\u4e0d\u6e05\u6670"),ZOOM_WARNING:g._("\u8fd9\u79cd\u653e\u5927\u7a0b\u5ea6\u4f1a\u9020\u6210\u5934\u50cf\u6a21\u7cca\u3002")};e.exports=h;},null);
__d("ProfilePicMenuDialogThumbnailMixin",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getThumbnailCoordinates:function(h,i){return {endX:Math.abs((h.x+h.width)/i.width),endY:Math.abs((h.y+h.height)/i.height),startX:Math.abs(h.x/i.width),startY:Math.abs(h.y/i.height)};}};e.exports=g;},null);
__d("XProfilePicCropAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/profile\/picture\/crop_profile_pic\/",{photo_id:{type:"Int",required:true},profile_id:{type:"Int",required:true},height:{type:"Float",required:true},width:{type:"Float",required:true},x:{type:"Float",required:true},y:{type:"Float",required:true},source:{type:"Enum",defaultValue:"timeline",enumType:1},method:{type:"Enum",defaultValue:"existing",enumType:1}});},null);
__d("XProfilePicMakeAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/profile\/picture\/make_profile_pic\/",{end_x:{type:"Float"},end_y:{type:"Float"},photo_id:{type:"Int",required:true},profile_id:{type:"Int",required:true},source:{type:"Enum",defaultValue:"timeline",enumType:1},start_x:{type:"Float"},start_y:{type:"Float"},method:{type:"Enum",defaultValue:"existing",enumType:1}});},null);
__d("XProfilePicSaver",["AsyncRequest","ArbiterMixin","ProfilePictureFlowLogging","XProfilePicCropAsyncController","XProfilePicMakeAsyncController","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i.step,n=l(h);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r,s){"use strict";this.$XProfilePicSaver0=r;this.$XProfilePicSaver1=s;}q.prototype.setProfilePhotoSource=function(r){"use strict";this.$XProfilePicSaver2=r;return this;};q.prototype.setProfilePhotoMethod=function(r){"use strict";this.$XProfilePicSaver3=r;return this;};q.prototype.setFlowType=function(r){"use strict";this.$XProfilePicSaver4=r;return this;};q.prototype.saveCroppedProfilePic=function(r){"use strict";this.$XProfilePicSaver5=true;this.$XProfilePicSaver6(j.getURIBuilder().setFloat('x',r.x).setFloat('y',r.y).setFloat('width',Math.min(r.width,1)).setFloat('height',Math.min(r.height,1)));this.$XProfilePicSaver7(m.CROP_SAVING);};q.prototype.saveAsProfilePic=function(){"use strict";this.$XProfilePicSaver8();};q.prototype.saveAsProfilePicWithPosition=function(r){"use strict";this.$XProfilePicSaver8(r);};q.prototype.$XProfilePicSaver8=function(r){"use strict";this.$XProfilePicSaver5=false;var s=k.getURIBuilder();if(r)s.setFloat('start_x',100*r.startX).setFloat('start_y',100*r.startY).setFloat('end_x',100*r.endX).setFloat('end_y',100*r.endY);this.$XProfilePicSaver6(s);this.$XProfilePicSaver7(m.PREVIOUS_PIC_SAVING);};q.prototype.$XProfilePicSaver9=function(r){"use strict";this.inform('error',r);this.$XProfilePicSaver7(this.$XProfilePicSaver5?m.CROP_FAIL:m.PREVIOUS_PIC_FAIL);};q.prototype.$XProfilePicSaver7=function(r){"use strict";this.$XProfilePicSaver4&&i.setFlowType(this.$XProfilePicSaver4);i.log(r);};q.prototype.$XProfilePicSaver6=function(r){"use strict";r.setInt('photo_id',this.$XProfilePicSaver0).setInt('profile_id',this.$XProfilePicSaver1).setEnum('source',this.$XProfilePicSaver2||'photo_view');this.$XProfilePicSaver3&&r.setEnum('method',this.$XProfilePicSaver3);new g(r.getURI()).setErrorHandler(this.$XProfilePicSaver9.bind(this)).setHandler(this.$XProfilePicSavera.bind(this)).send();this.$XProfilePicSaver7(m.LOADING);};q.prototype.$XProfilePicSavera=function(r){"use strict";this.inform('success',r);this.$XProfilePicSaver7(this.$XProfilePicSaver5?m.CROP_SUCCESS:m.PREVIOUS_PIC_SUCCESS);this.$XProfilePicSaver7(m.SUCCESS);};e.exports=q;},null);
__d("ProfilePicCropViewerMixin",["AsyncResponse","DialogX","LayerDestroyOnHide","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","ProfilePicMenuDialogThumbnailMixin","React","Run","TimelineURI","XProfilePicSaver","XUIDialogButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=m,w=v.PropTypes,x=360,y={propTypes:{method:w.string,source:w.string,uploadRequest:w.object},componentDidMount:function(){this._preventClose=true;n.onBeforeUnload(function(){if(this.isMounted()&&!this._shouldAllowClose())return j.LEAVE_WARNING_UNLOAD;}.bind(this),true);this._logFlowStep(k.step.VIEWER_INIT);},componentDidUpdate:function(z,aa){if(!aa.photoData&&this.state.photoData)this._logFlowStep(this.state.photoData.previousprofilepic?k.step.PREVIOUS_PIC_INIT:k.step.CROP);},componentWillUnmount:function(){this._warningDialog&&this._warningDialog.destroy();this._warningDialog=null;},getViewerID:function(){return this.props.setid;},_forceClose:function(z){this._preventClose=false;this.close();this._logFlowStep(z||k.step.CANCEL);},handleCancel:function(){if(this.props.cancelCallback)this.props.cancelCallback();if(!this.props.warnOnCancel||this._shouldAllowClose())return this._forceClose();this._showCloseWarning();},handleUploadCancel:function(){this.props.uploadRequest&&this.props.uploadRequest.abort();this._forceClose(k.step.UPLOAD_CANCEL);},handlePositionSave:function(){var z=this._prepareSaver();z.saveAsProfilePicWithPosition(this.getThumbnailCoordinates(this.getCropArea(),this.getPhotoSize()));},handleSetThumbnailSave:function(){this.handlePositionSave();this._logFlowStep(k.step.SKIP_CROP);},handleCropSave:function(){var z=this.getCropArea(),aa=this.getPhotoSize(),ba=this._prepareSaver();ba.saveCroppedProfilePic({x:z.x/aa.width,y:z.y/aa.height,width:z.width/aa.width,height:z.height/aa.height});},_prepareSaver:function(){this.setState({savingMode:true});this._preventClose=false;var z=new p(this.state.photoData.id,this.props.profileID).setFlowType(this.getFlowType());u([z.subscribe('success',this._savingSuccess),z.subscribe('error',this._savingError)]);this.props.method&&z.setProfilePhotoMethod(this.props.method);this.props.source&&z.setProfilePhotoSource(this.props.source);return z;},_logFlowStep:function(z){k.setFlowType(this.getFlowType()).setSource(this.props.source).log(z);},_savingSuccess:function(z,aa){if(this.props.successCallback){this.props.successCallback(aa);this.close();return;}var ba=new h({addedBehaviors:[i],width:x,xui:true},m.createElement("div",null,m.createElement(t,{showCloseButton:false},j.SAVED_TITLE),m.createElement(r,null,j.SAVED_BODY)));ba.subscribeOnce('aftershow',this.close);ba.show();o.goToProfileID(this.props.profileID);},_savingError:function(z,aa){this._preventClose=true;this.setState({savingMode:false});g.defaultErrorHandler(aa);this.inform('save_error',aa);if(this.props.errorCallback)this.props.errorCallback();},_shouldAllowClose:function(){return !this._preventClose;},_showCloseWarning:function(){if(!this._warningDialog)this._warningDialog=new h({modal:true,width:x,xui:true},m.createElement("div",null,m.createElement(t,null,j.LEAVE_WARNING_TITLE),m.createElement(r,null,j.LEAVE_WARNING_BODY),m.createElement(s,null,m.createElement(q,{action:"cancel",label:j.LEAVE_WARNING_CANCEL}),m.createElement(q,{action:"cancel",onClick:function(){return this._forceClose();}.bind(this),label:j.LEAVE_WARNING_OK,use:"confirm"}))));this._warningDialog.show();}};e.exports=Object.assign(y,l);},null);
__d("ProfilePicViewerPublicIcon.react",["ProfilePicCropViewerStrings","React","ReactComponentWithPureRenderMixin","Tooltip","Image.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"ProfilePicViewerPublicIcon",mixins:[i],propTypes:{photoData:n.object.isRequired},render:function(){if(this.props.photoData.isWorkUser)return null;return (h.createElement(k,h.__spread({className:"_3llf"},j.propsFor(g.PROFILE_PIC_VISIBILITY),{src:"/images/mobile/privacy/lightgray_large/everyone.png"})));}});e.exports=o;},null);
__d("ScrapbookViewerCustomIcon.react",["React","ReactComponentWithPureRenderMixin","Tooltip","Image.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g.createClass({displayName:"ScrapbookViewerCustomIcon",mixins:[h],render:function(){return (g.createElement(j,g.__spread({className:"_3llf"},i.propsFor(l._("\u8fd9\u5f20\u7167\u7247\u53ef\u89c1\u4e8e\u80fd\u770b\u5230\u8fd9\u4e2a\u526a\u8d34\u7c3f\u4e2d\u81f3\u5c11\u4e00\u5f20\u7167\u7247\u7684\u7528\u6237\u3002")),{src:"/images/litestand/audience/custom.png"})));}});e.exports=m;},null);
__d("ProfilePicViewerFooterText.react",["React","XUIGrayText.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"ProfilePicViewerFooterText",render:function(){return (g.createElement(h,g.__spread({},this.props,{className:"_2pi2",display:"block",shade:"medium",size:"small"}),this.props.children));}});e.exports=j;},null);
__d("ProfilePicCropViewerLoading.react",["React","XUISpinner.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"ProfilePicCropViewerLoading",render:function(){return (g.createElement("div",{className:j("_278e",this.props.className)},g.createElement(h,{background:"dark",className:"_4-cf",size:"large"})));}});e.exports=k;},null);
__d("PhotoProgressBar.react",["React","ProgressBar.react"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k=1,l=50,m=g.createClass({displayName:"PhotoProgressBar",propTypes:{fakeLoadMultplier:j.number},getDefaultProps:function(){return {fakeLoadMultplier:1.5,min:0,max:100};},getInitialState:function(){return {value:this.props.value};},render:function(){var n=this._scaleValue(this.state.value);return g.createElement(h,g.__spread({},this.props,{value:n}));},componentWillReceiveProps:function(n){this.setState({value:n.value});},componentWillUnmount:function(){clearTimeout(this._fakeLoad);},_fakeLoadBar:function(){this.setState({value:this.state.value+k});},_scaleValue:function(n){var o=this.props,p=(o.max-o.min)*o.fakeLoadMultplier+o.min;if(n>=o.max&&n<p){clearTimeout(this._fakeLoad);this._fakeLoad=setTimeout(this._fakeLoadBar,l);}return n/p*o.max;}});e.exports=m;},null);
__d("ZoomProfilePicDragger.react",["BasicVector","React","PhotoZoomCrop.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h,k=j.PropTypes,l=h.createClass({displayName:"ZoomProfilePicDragger",propTypes:{photoData:k.object.isRequired},render:function(){var m=this.getImage(),n=this.props.photoData.facebox||{center:{x:.5,y:.5},size:{x:1,y:1}};return (h.createElement(i,h.__spread({},this.props,{center:n.center,cropSizeRatio:n.size,imageSize:new g(m.width,m.height),ref:"zoomCrop",src:m.uri})));},getDimsArea:function(){return this.getDimensions().getArea();},getImage:function(){return this.props.photoData.original;},getDimensions:function(){return this.refs.zoomCrop.getDimensions();},resetDimensions:function(){return this.refs.zoomCrop.resetDimensions();}});e.exports=l;},null);
__d("ZoomProfilePicCropViewerBody.react",["BasicVector","PhotoZoomCropDimensions","ProfilePicCropViewerStrings","React","SpotlightProfilePicCropOptions","SpotlightViewerDimensionMixin","PhotoZoomCrop.react","ProfilePicCropViewerLoading.react","PhotoProgressBar.react","ZoomProfilePicDragger.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=j,s=r.PropTypes,t=320,u=j.createClass({displayName:"ZoomProfilePicCropViewerBody",mixins:[l],propTypes:{height:s.number.isRequired,photoData:s.object,savingMode:s.bool.isRequired,width:s.number.isRequired},getInitialState:function(){return {uploadStatus:null};},componentDidMount:function(){this._listenForUploadProgress();},componentDidUpdate:function(){this._listenForUploadProgress();},componentWillUnmount:function(){if(this._progress){this._progress.unsubscribe();this._progress=null;}},render:function(){var v=this.props.photoData,w;if(this.state.uploadStatus!==null){w=j.createElement(o,{className:"_2aii",isRounded:true,size:"small",value:this.state.uploadStatus});}else if(!v||this.props.savingMode)w=j.createElement(n,{className:((!v?"_3mdt":''))});return (j.createElement("div",{className:"_3mds",style:{height:this.props.height}},this._getImage(),w));},_getImage:function(){var v=this.props.photoData;if(!v)return null;if(v.previousprofilepic)return (j.createElement(p,{messageText:i.THUMBNAIL_MODE_EXPLANATION,photoData:v,ref:"image"}));var w=new g(v.original.width,v.original.height),x=k.getOptionsAsRatio(v,w),y=w.x<t||w.y<t?i.SMALL_PHOTO_WARNING:i.ZOOM_WARNING;return (j.createElement(m,j.__spread({},this.props,{className:this.props.className,center:x.center,cropSizeRatio:x.size,imageSize:w,ref:"image",src:v.original.uri,warningText:y})));},resetDimensions:function(){this.refs.image.resetDimensions();},getDimensionsArea:function(){return this.refs.image.getDimensions().getArea();},hasSpaceToDrag:function(){var v=new g(this.props.photoData.original.width,this.props.photoData.original.height);return !h.isSquare(v);},_listenForUploadProgress:function(){var v=this.props.uploadRequest;if(v&&v.subscribe&&!this._progress)this._progress=v.subscribe('progress',function(w,x){return this.setState({uploadStatus:x.event.loaded/x.event.total*100});}.bind(this));}});e.exports=u;},null);
__d("ZoomProfilePicCropViewer.react",["ArbiterMixin","ProfilePicCropViewerMixin","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","React","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","FamilyTaggingCropperSource","Link.react","ProfilePicViewerPublicIcon.react","ScrapbookViewerCustomIcon.react","ProfilePicViewerFooterText.react","XUIButton.react","XUIDialog.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","ZoomProfilePicCropViewerBody.react","cx","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=k,ba=aa.PropTypes,ca=484,da=520,ea=z({CROP:null,SET_THUMBNAIL:null}),fa=k.createClass({displayName:"ZoomProfilePicCropViewer",mixins:[g,h,l,m],propTypes:{profileID:ba.string.isRequired,setid:ba.string.isRequired,source:ba.string,warnOnCancel:ba.bool,cropOnlyMode:ba.bool,successCallback:ba.func,errorCallback:ba.func,cancelCallback:ba.func},getInitialState:function(){return {open:true,photoData:null,savingMode:false,mode:ea.CROP};},render:function(){var ga=this.state.photoData,ha=this.isCropMode()?i.CROP_AND_SAVE:i.SET_THUMBNAIL;if(this.props.uploadRequest){ha=i.UPLOADING;}else if(!ga){ha=i.LOADING;}else if(ga.previousprofilepic)ha=i.SET_THUMBNAIL;var ia;if(this.props.uploadRequest){ia=k.createElement(s,{label:i.BUTTON_CANCEL,onClick:this.handleUploadCancel});}else if(this.state.savingMode){ia=k.createElement(r,{weight:"bold"},i.CROP_SAVING);}else if(ga){var ja=(this.props.source===n.PROFILE_SOURCE)?k.createElement(q,{key:"icon"}):k.createElement(p,{key:"icon",photoData:ga});ia=[ja,k.createElement(s,{key:"buttonCancel",label:i.BUTTON_CANCEL,onClick:this.handleCancel}),k.createElement(s,{key:"buttonSave",label:this.getSaveButtonLabel(),onClick:this.handleSaveClick,use:"confirm"})];}var ka=this.renderFooterLeftContent();if(!ka&&!ia)ia=k.createElement(r,null," ");return (k.createElement(t,{layerHideOnBlur:false,modal:true,shown:true,width:da},k.createElement(v,{showCloseButton:false},k.createElement(w,{display:"block",shade:"medium",size:"medium",weight:"bold"},ha)),k.createElement(x,{height:ca,key:"cropViewerBody",messageText:this.isCropMode()?null:i.THUMBNAIL_MODE_EXPLANATION,photoData:this.state.photoData,photoid:this.props.photoid,profileID:this.props.profileID,ref:"zoomBody",savingMode:this.state.savingMode,setid:this.props.setid,uploadRequest:this.props.uploadRequest,width:da}),k.createElement(u,{leftContent:ka},ia)));},getSaveButtonLabel:function(){if(!this.isCropMode()||(this.state.photoData&&this.state.photoData.previousprofilepic))return i.BUTTON_SAVE;return i.SAVE_AND_CROP;},renderFooterLeftContent:function(){var ga=this.state.photoData;if(!ga||this.props.uploadRequest||this.props.cropOnlyMode)return null;if(ga.previousprofilepic)return (k.createElement(r,null,i.PREV_PHOTO_ADJUST_THUMBNAIL));if(this.state.savingMode)return null;if(this.isCropMode()){var ha=i.SKIP_CROP,ia=i.SKIP_CROP_EXPLANATION;}else{ha=i.CROP_AND_SAVE;ia=i.CROP_EXPLANATION;}return (k.createElement(r,null,k.createElement(o,{"aria-label":ia,className:"_4q_0","data-hover":"tooltip",onClick:this.handleModeChange},ha)));},handleModeChange:function(){var ga=this.isCropMode()?ea.SET_THUMBNAIL:ea.CROP;this.setState({mode:ga});if(ga===ea.SET_THUMBNAIL)this.refs.zoomBody.resetDimensions();},handleSaveClick:function(){if(this.state.photoData.previousprofilepic){this.handlePositionSave();return;}if(this.isCropMode()){this.handleCropSave();return;}this.handleSetThumbnailSave();},getCropArea:function(){return this.refs.zoomBody.getDimensionsArea();},getFlowType:function(){return j.flow.ZOOMCROP;},getPhotoSize:function(){return this.state.photoData.original;},isCropMode:function(){return this.state.mode===ea.CROP;}});e.exports=fa;},null);
__d("XProfilePicCropViewerAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/profile\/picture\/crop_viewer\/",{photo_id:{type:"String",required:true},photo_sizes:{type:"IntVector",defaultValue:[960,2048,4096]},profile_id:{type:"Int",required:true},set_id:{type:"String",required:true}});},null);
__d("ProfilePicCropViewerInit",["ProfilePictureFlowLogging","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i='profile-picture-crop',j='loading',k=g.flow,l,m;function n(){m&&m.close();}function o(q,r,s){s=s||{};d(['SpotlightViewerInit','ZoomProfilePicCropViewer.react','PhotoStore','AsyncRequest','AsyncResponse','XProfilePicCropViewerAsyncController'],function(t,u,v,w,x,y){n();l=i+':'+q+':'+r;m=t.render(h.createElement(u,{open:true,method:s.method,photoid:q,profileID:r,setid:l,source:s.source,uploadRequest:s.uploadRequest,warnOnCancel:s.warnOnCancel,cropOnlyMode:s.cropOnlyMode,successCallback:s.successCallback,errorCallback:s.errorCallback,cancelCallback:s.cancelCallback}),function(){m=null;});if(v.hasBeenCreated(l)||q===j)return;var z=y.getURIBuilder().setString('photo_id',q).setInt('profile_id',r).setString('set_id',l).getURI(),aa=l;new w(z).setErrorHandler(function(ba){aa===l&&n();x.defaultErrorHandler(ba);}).send();});return true;}var p={close:n,getFlowType:function(){return k.ZOOMCROP;},useCropViewer:function(){return true;},loading:function(q,r){o(j,q,r);},loadID:o};e.exports=p;},null);
__d("ProfilePicUploadToCrop",["FileInputUploader","JpegResizer","PhotosMimeType","ProfilePicCropViewerInit","ProfilePictureFlowLogging","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(){return j.getFlowType();}function n(){k.setFlowType(m()).log(k.step.UPLOAD_SUCCESS);}function o(){k.setFlowType(m()).log(k.step.RESIZE_SKIPPED);}function p(q,r,s,t,u){"use strict";var v=r.getInput();if(!v.name)v.name='photo';this.$ProfilePicUploadToCrop0=null;if(h.isSupported())this.$ProfilePicUploadToCrop0=new h(1);l(r.subscribe('change',function(){if(!r.getValue())return;k.setFlowType(m()).log(k.step.UPLOAD_SELECT);u=String(u);var w=new g(v).setURI(q).setAllowCrossOrigin(true);j.loading(u,{uploadRequest:w});l([w.subscribe('success',function(x,y){r.clear();p.loadCropper(y.response.getPayload(),u,t);}),w.subscribe('failure',function(){r.clear();j.close();k.setFlowType(m()).log(k.step.FAIL);})]);if(this.$ProfilePicUploadToCrop0)w.setUploadInParallel(true).setPreprocessHandler(this.$ProfilePicUploadToCrop1.bind(this));w.send();}.bind(this)));}p.prototype.$ProfilePicUploadToCrop1=function(q,r){"use strict";k.setFlowType(m()).log(k.step.RESIZE_BEGIN);var s=q.getFile();if(!s||!i(s.type).isJpeg()){o();return r(q);}this.$ProfilePicUploadToCrop0.resizeBlob(s,function(t,u,v){if(t){k.setFlowType(m()).log(k.step.RESIZE_FAIL);return r(q);}if(v){o();}else{q.setFile(u);k.setFlowType(m()).log(k.step.RESIZE_SUCCESS);}r(q);});};p.loadCropper=function(q,r,s){"use strict";n();j.loadID(q.fbid,r,{warnOnCancel:true,source:s,method:'upload'});};e.exports=p;},null);
__d("ProfilePicDragAndDropUpload",["ProfilePicCropViewerInit","ProfilePictureFlowLogging","ProfilePicUploadToCrop","SinglePictureUploadTarget"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={init:function(l,m,n){var o=new j(l,m).setAllowCrossOrigin(true).setPreprocessCallback(function(){h.setFlowType(g.getFlowType()).log(h.step.DRAG_AND_DROP);g.loading(n,{uploadRequest:o});}).setAfterSuccessCallback(function(p){i.loadCropper(p,n,'timeline');}).activate();}};e.exports=k;},null);
__d("TimelineCoverPhotoChangePrivacyDialog",["Arbiter","Event"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={init:function(j,k,l){this._dialog=j;this._tooltipLink=l;this._closeButton=k;this._showDialog=false;this._tooltip=null;},registerDialogShow:function(){this._showDialog=true;g.subscribe('CoverPhotoEdit',function(j,k){if(!this._showDialog)return;if(k.state==="open"){this._dialog&&this._dialog.show();if(this._tooltipLink){this._tooltip=this._tooltipLink.getAttribute('data-hover');this._tooltipLink.setAttribute('data-hover',null);}}else if(k.state==="closed")this.hideDialog();}.bind(this));h.listen(this._closeButton,'click',this.hideDialog.bind(this));},hideDialog:function(){this._dialog&&this._dialog.hide();if(this._tooltipLink)this._tooltipLink.setAttribute('data-hover',this._tooltip);this._showDialog=false;}};e.exports=i;},null);
__d("TimelineProfilePic",["Arbiter","CSS","Dialog","DOM","HTML","TimelineProfilePicConfig","Run","$","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p;q.init=function(r,s){"use strict";q.destroyInstance();p=new q(r||'fbProfileCover',s||'.profilePicThumb');};function q(r,s){"use strict";this.$TimelineProfilePic0=n(r);this.$TimelineProfilePic1=s;this.$TimelineProfilePic2=[g.subscribe(l.loading,this.startLoading.bind(this)),g.subscribe(l.success,this.onUploadSuccess.bind(this))];m.onBeforeUnload(this.onBeforeUnload.bind(this));m.onLeave(this.destroy.bind(this));}q.prototype.$TimelineProfilePic3=function(r){"use strict";this.$TimelineProfilePic4=r;h.conditionClass(this.$TimelineProfilePic0,'profilePicLoading',r);};q.prototype.destroy=function(){"use strict";this.$TimelineProfilePic2.forEach(function(r){r.unsubscribe();});this.$TimelineProfilePic2=[];p=null;};q.prototype.startLoading=function(r,s){"use strict";this.$TimelineProfilePic3(!!s.isLoading);};q.prototype.onUploadSuccess=function(r,s){"use strict";this.$TimelineProfilePic3(false);if(!s.newPic)return;var t=i.getCurrent();if(t)t.hide();var u=s.newPic;j.replace(j.find(this.$TimelineProfilePic0,this.$TimelineProfilePic1),typeof u==='string'?k(u):u);if(typeof(s.profileId)!==(void 0)&&typeof(s.headerPicURL)!==(void 0)){var v=o('profile_pic_header_'+s.profileId);if(v)v.src=s.headerPicURL;}var w=o('fbProfilePicSelector');if(w)h.removeClass(w,'fbTimelineNullProfilePicSelector');};q.prototype.onBeforeUnload=function(){"use strict";if(p===this&&this.$TimelineProfilePic4)return l.leavingMessage;};q.destroyInstance=function(){"use strict";p&&p.destroy();};e.exports=q;},null);
__d("timeline-cover-dragdrop-edit",["SinglePictureUploadTarget","TimelineCover"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=function(){var m=h.getInstance();m.hideLoadingIndicator();},j=function(m){var n=h.getInstance(),o=m.id,p=m.photo_node;n.updateCoverImage(o,p);},k=function(m){h.getInstance().showLoadingIndicator();},l=function(m,n,o,p){new g(m,n).setAllowCrossOrigin(true).setMaximumDimensions(o,p).setPreprocessCallback(k).setOncompleteCallback(i).setAfterSuccessCallback(j).activate();};f.initialize_timeline_cover_drop_target=l;},null);
__d("InfoReviewInstanceManager",["DOM","Event","React","csx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k="._5sf3",l=[],m=[],n={addInstanceRoot:function(o,p){m.push(h.listen(p,'click',function(q){var r=g.scry(p,k)[0];r&&g.remove(r);}));l.push(o);},cleanupInstances:function(){var o=[];while(l.length){var p=l.pop();document.contains(p)?o.push(p):i.unmountComponentAtNode(p);}while(m.length)m.pop().remove();l=o;}};e.exports=n;},null);
__d("InfoReviewCloseButton",["DOM","Event","InfoReviewInstanceManager","Parent","$","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m='fbTimelineUnit';function n(o,p){"use strict";this.$InfoReviewCloseButton0=o;this.$InfoReviewCloseButton1=p;this.$InfoReviewCloseButton2=h.listen(this.$InfoReviewCloseButton0,'click',this.$InfoReviewCloseButton3.bind(this));l(this.$InfoReviewCloseButton2);}n.prototype.$InfoReviewCloseButton3=function(){"use strict";var o=k(this.$InfoReviewCloseButton1);if(o.parentElement.children.length===1)o=j.byClass(o,m);g.remove(o)&&this.$InfoReviewCloseButton4();i.cleanupInstances();};n.prototype.$InfoReviewCloseButton4=function(){"use strict";this.$InfoReviewCloseButton0=null;this.$InfoReviewCloseButton1=null;this.$InfoReviewCloseButton2&&this.$InfoReviewCloseButton2.remove();this.$InfoReviewCloseButton2=null;};e.exports=n;},null);      Uy)FUy)F;E9WX(   Ba,:https://fbstatic-a.akamaihd.net/rsrc.php/v2/yV/r/HwsFxYj_5DD.js necko:classified 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8F+O2DZM7ZTG6GukivU8OT5gAAAAAAAASEMIIEgDCCA2igAwIBAgIOAQAAAAABTRDXxzz7opAwDQYJKoZIhvcNAQEFBQAwRjEXMBUGA1UEChMOQ3liZXJ0cnVzdCBJbmMxKzApBgNVBAMTIkN5YmVydHJ1c3QgUHVibGljIFN1cmVTZXJ2ZXIgU1YgQ0EwHhcNMTUwNTAxMTg1ODA5WhcNMTYwNTAxMTg1ODA5WjBuMQswCQYDVQQGEwJVUzELMAkGA1UECBMCTUExEjAQBgNVBAcTCUNhbWJyaWRnZTEiMCAGA1UEChMZQWthbWFpIFRlY2hub2xvZ2llcywgSW5jLjEaMBgGA1UEAxMRYTI0OC5lLmFrYW1haS5uZXQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDEGUjyaOpvJfYHrbJTK5XOb1/bhPdfCrqc78tNuCNMKfl+FBtvsEC8v7F+TFY55G9RJ8vfnBXY8HlJX2ZzvRHkaVdIOsAzw45AwSfyJIcjo8nMKQ+dKikDI4mr0lK2jVHpiGnUZt0BqcN+7cF+SWks11bEOqCkCcuewzhM715jsycFeFBbHpmKgtOHLssmJTQ2mCaKbJSKUfJ/QV1vPLsiTv+G7mbgwpsXFz9rgvxzzshJuSEB5WZmPjB9rcTrWOokJM7dD0WqsBhyoMQ/toFY9ErZFvGUtDHL9aVbKqXRCzDxSWLGUJv3YQ6/A3CaZYWDWk78NzNnVOIw/DjOQ7fdAgMBAAGjggFCMIIBPjAfBgNVHSMEGDAWgBQEmGDfgBuWSV1lVi2lLAkkCuzcuTA/BgNVHR8EODA2MDSgMqAwhi5odHRwOi8vY3JsLm9tbmlyb290LmNvbS9QdWJsaWNTdXJlU2VydmVyU1YuY3JsMB0GA1UdDgQWBBRE9PJxwXQQdDMffoQ6mQm832ibGjAJBgNVHRMEAjAAMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwEQYJYIZIAYb4QgEBBAQDAgbAMG4GA1UdEQRnMGWCDiouYWthbWFpaGQubmV0ghYqLmFrYW1haWhkLXN0YWdpbmcubmV0ghFhMjQ4LmUuYWthbWFpLm5ldIIPKi5ha2FtYWl6ZWQubmV0ghcqLmFrYW1haXplZC1zdGFnaW5nLm5ldDANBgkqhkiG9w0BAQUFAAOCAQEABS5B5YO+nPvReLUoN0Xmsjo7J9Zze+Rc3w4kY3ERaXxLoRRqo409D8JMo8a/9sUVOlv1d+rAgwwwDbFWfjwKXqrIDpBQAaDQLQbepW79tdSaQPERCPovX8N076sYGyPxPkZ+ESLcf8KptEXOqw2u6WcnuRlyhn4jfCS3ilb57N5Hsr1PM5FBoeFTne8BATnIjBAvlvGeZZgGScCSRh47MXZCmtwdtarLWFVCwdlP+bdXIljtjierCval+oJzlwJpL7cB4OquijiER1ou7sipWnf5Gv9BIAlc3xCl9M7jDQYacoaES4DJLMItT3//rA3pKxShC0qdVrcan/RQQQ6z18AvAAMAAAAAAQEAAA== request-method GET response-head HTTP/1.1 200 OK
access-control-allow-origin: *
Cache-Control: public, max-age=31398573
Content-MD5: mDBBLiX5lE3Ma8GRgt6TbA==
Content-Type: application/x-javascript; charset=utf-8
Date: Thu, 11 Jun 2015 04:27:16 GMT
Expires: Wed, 08 Jun 2016 14:16:49 GMT
Last-Modified: Mon, 01 Jan 2001 08:00:00 GMT
Timing-Allow-Origin: *
x-content-type-options: nosniff
x-fb-debug: x+LaBG+jZ4lvyC5HI+ZnAsA34ERcfdiEcsZ9xAPGGW2yTUFIYxYfH+7w/qZ4ANhgEEIffxahBE3qFjtJxv+lEg==
X-Firefox-Spdy: 3.1
 uncompressed-len 0   }